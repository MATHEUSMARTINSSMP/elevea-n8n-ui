{
  "name": "auth_api_auth_password_reset_confirm",
  "description": "Workflow modular para api/auth/password-reset-confirm - MÃ³dulo AUTH",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "api/auth/password-reset-confirm",
        "responseMode": "lastNode",
        "options": {}
      },
      "id": "webhook-password-reset-confirm",
      "name": "ðŸ”‘ Webhook - Password Reset Confirm",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [
        260,
        1300
      ],
      "webhookId": "elevea-password-reset-confirm"
    },
    {
      "parameters": {
        "jsCode": "// FUNÃ‡ÃƒO: password_reset_confirm (do GAS)\nconst out = [];\nfor (const { json } of items) {\n  const { token, password } = json.body || {};\n  \n  if (!token || !password) {\n    out.push({\n      json: {\n        success: false,\n        error: 'Token e nova senha sÃ£o obrigatÃ³rios',\n        timestamp: new Date().toISOString()\n      }\n    });\n    continue;\n  }\n  \n  if (password.length < 6) {\n    out.push({\n      json: {\n        success: false,\n        error: 'Senha deve ter no mÃ­nimo 6 caracteres',\n        timestamp: new Date().toISOString()\n      }\n    });\n    continue;\n  }\n  \n  if (token.length < 10) {\n    out.push({\n      json: {\n        success: false,\n        error: 'Token invÃ¡lido ou expirado',\n        timestamp: new Date().toISOString()\n      }\n    });\n    continue;\n  }\n  \n  const hashedPassword = 'hashed_' + Buffer.from(password).toString('base64');\n  \n  out.push({\n    json: {\n      success: true,\n      message: 'Senha redefinida com sucesso',\n      token: token,\n      passwordHash: hashedPassword,\n      timestamp: new Date().toISOString()\n    }\n  });\n}\nreturn out;"
      },
      "id": "code-password-reset-confirm",
      "name": "ðŸ”‘ Code - Password Reset Confirm",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        460,
        1300
      ]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {
          "headers": {
            "entries": [
              {
                "name": "Access-Control-Allow-Origin",
                "value": "*"
              }
            ]
          }
        }
      },
      "id": "respond-password-reset-confirm",
      "name": "ðŸ“¤ Respond - Password Reset Confirm",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        660,
        1300
      ]
    }
  ],
  "connections": {
    "webhook-password-reset-confirm": {
      "main": [
        [
          {
            "node": "code-password-reset-confirm",
            "type": "main",
            "index": 0
          },
          {
            "node": "respond-password-reset-confirm",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "code-password-reset-confirm": {
      "main": [
        [
          {
            "node": "respond-password-reset-confirm",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "tags": [
    "modular",
    "elevea",
    "auth"
  ]
}